<section data-type="chapter" id="capitulo_03_dibuja">

<h1>Capítulo 3. Dibuja</h1>

<p>Al principio, dibujar en una pantalla de computador es como trabajar en papel cuadriculado. Parte como un procedimiento técnico cuidadoso, pero a medida que se introducen nuevos conceptos, dibujar formas simples con software se transforma en trabajar con animación e interacción. Antes de que hagamos este salto, tenemos que empezar por el principio.</p>

<p>Una pantalla de computador es una matriz de elementos de luz llamados pixeles. Cada pixel tiene una posición dentro de la matriz definida por coordenadas. Cuando creas un bosquejo en p5.js, lo puedes visualizar con un navegador web. Dentro de la ventana del navegador, p5.js create un lienzo para dibujar, un área en la que se dibujan las gráficas. El lienzo puede ser del mismo tamaño que la ventana, o puede tener dimensiones distintas. El lienzo está usualmente posicionado en la esquina superior izquierda de tu ventana, pero lo puedes posicionar en otros lugares.</p>

<p>Cuando dibujas en el lienzo, la coordenada x es la distancia desde el borde izquierdo del lienzo y la coordenada y es la distancia desde el borde superior. Escribimos las coordenadas de un pixel así (x,y). Así que, si el lienzo es de 200 x 200 pixeles, la esquina superior izquierda es (0,0), el centro está en (100, 100) y la esquina inferior derecha es (199, 199). Estos números pueden parecer confusos, ¿por qué contamos de 0 a 199 en vez de 1 a 200? La respuesta es que en programación, usualmente contamos partiendo en 0 por qué es más fácil así hacer cálculos que veremos más adelante.</p>

<h2>El lienzo</h2>

<p>El lienzo es creado y las imágenes son dibujadas dentro de él a través de elementos de código llamados funciones. Las funciones son el bloque fundamental de un programa en p5.js. El comportamiento de una función está definido por sus parámetros. Por ejemplo, casi todos los programas en p5.js tienen una función createCanvas() que crea un lienzo para dibujar con un ancho y una altura específicos. Si tu programa no tiene una función createCanvas(), el lienzo creado por defecto tiene dimensiones de 100x100 pixeles.</p>

<h2>Ejemplo 3-1: crea un lienzo</h2>

<p>La función createCanvas() tiene dos parámetros, el primero define el ancho del lienzo para dibujar, el segundo define la altura. Para dibujar un lienzo que es de 800 pixeles de ancho y 600 pixeles de altura, escribe:</p>

{% codesplit ch03/03_01.js %}
{% p5 ch03/03_01.js class:'whatever' %}

<p>Corre esta línea de código para ver el resultado. Escribe diferentes valores para explorar las posibilidades. Trata con números muy pequeños y con números más grandes que las dimensiones de tu pantalla.</p>

<h2>Ejemplo 3-2: dibuja un punto</h2>

<p>Para definir el color de un solo pixel dentro del lienzo, usamos la función point(). Tiene dos parámetros que definen la posición: la coordenada x, seguida de la coordenada y. Para crear un pequeño lienzo y un punto en el centro de él, coordenada (240, 60), escribe:</p>

{% codesplit ch03/03_02.js %}
{% p5 ch03/03_02.js class:'whatever' %}

<p>Escribe un programa que pone un punto en cada esquina del lienzo para dibujar y uno en el centro. Luego trata de poner puntos consecutivos de manera vertical, horizontal y en líneas diagonales.</p>

<h2>Formas básicas</h2>

<p>p5.js incluye un grupo de funciones para dibujar formas básicas (ver la figura 3-1). Formas simples, como líneas, pueden ser combinadas para crear formas más complicadas como una hoja o una cara.</p>

<p>Para dibujar solo una línea, necesitamos cuatro parámetros: dos para el punto de inicio y dos para el final.</p>

<h2>Ejemplo 3-3: dibuja una línea</h2>

<p>Para dibujar una línea entre la coordenada (20, 50) y (420, 110), prueba:</p>

{% codesplit ch03/03_03.js %}
{% p5 ch03/03_03.js class:'whatever' %}

<h2>Ejemplo 3-4: dibuja formas básicas</h2>

<p>Siguiendo este patrón, un triángulo necesita seis parámetros y un cuadrilátero necesita ocho (un par para cada punto):</p>

{% codesplit ch03/03_04.js %}
{% p5 ch03/03_04.js class:'whatever' %}

<h2>Ejemplo 3-5: dibuja un rectángulo</h2>

<p>Tanto rectángulos como elipses son definidos por cuatro parámetros: el primero y el segundo son las coordenadas x e y del punto ancla, el tercero es el ancho y el cuarto por la altura. Para dibujar un rectángulo (180, 60) con ancho de 220 pixeles y una altura de 40, usa la función rect() así:</p>

{% codesplit ch03/03_05.js %}
{% p5 ch03/03_05.js class:'whatever' %}

<h2>Ejemplo 3-6: dibuja una elipse</h2>

Las coordenadas x e y para un rectángulo son la esquina superior izquierda, pero para una elipse son el centro de la figura. En este ejemplo, date cuenta que la coordenada y para la primera elipse está fuera del lienzo. Los objetos pueden ser dibujados parcialmente (o enteramente) fuera del lienzo sin arrojar errores:

{% codesplit ch03/03_06.js %}
{% p5 ch03/03_06.js class:'whatever' %}

<p>p5.js no tiene funciones distintas para hacer cuadrados y círculos. Para hacer estas figuras, usa el mismo valor para los parámetros de ancho y altura en las funciones ellipse() y rect().</p>

<h2>Ejemplo 3-7: dibuja una parte de una elipse</h2>

<p>La función arc() dibuja una parte de una elipse:</p>

{% codesplit ch03/03_07.js %}
{% p5 ch03/03_07.js class:'whatever' %}

<p>El primer y segundo parámetro definen la ubicación, mientras que el tercero y el cuarto definen el ancho y la altura. El quinto parámetro define el ángulo de inicio y el sexto el ángulo de parada. Los ángulos están definidos en radianes, en vez de grados. Los radianes son medidas de ángulo basadas en el valor de pi (3.14159). La figura 3-2 muestra cómo ambos están relacionados. Como se ve en este ejemplo, cuatro valores de radianes son usados tan frecuentemente que fueron agregados con nombres especiales como parte de p5.js. Los valores PI, QUARTER_PI, HALF_PI y TWO_PI pueden ser usados para reemplazar los valores en radianes de 180, 45, 90 y 360 grados.</p>

<h2>Ejemplo 3-8: dibuja con grados</h2>

<p>Si prefieres usar mediciones en grados, puedes convertir a radianes con la función radians(). Esta función toma un ángulo en grados y lo transforma en su correspondiente valor en radianes. El siguiente ejemplo es el mismo que el ejemplo 3-7, pero usa la función radians() para definir en grados los valores de inicio y final:</p>

{% codesplit ch03/03_08.js %}
{% p5 ch03/03_08.js class:'whatever' %}

<h2>Ejemplo 3-9: usa angleMode</h2>

<p>Alternativamente, puedes convertir tu bosquejo para que use grados en vez de radianes usando la función angleMode(). Esta función cambia todas las funciones que aceptan o retornan ángulos para que usen ángulos o radianes, basado en el parámetro de al función, en vez de que tú tengas que convertirlo. El siguiente ejemplo es el mismo que el 3-8, pero usa la función angleMode(DEGREES) para definir los valores en grados de inicio y final:</p>

{% codesplit ch03/03_09.js %}
{% p5 ch03/03_09.js class:'whatever' %}

<h2>Orden de dibujo</h2>

<p>Cuando un programa corre, el computador empieza por el principio y lee cada línea de código hasta que llega a la última línea y luego se detiene.</h2>

<p>Nota</p>

<p>Hay unas pocas excepciones a esto, como cuando cargas archivos externos, pero revisaremos esto más adelante. Por ahora, puedes asumir que cada línea correa en orden cuando dibujas.</p>

<p>Si quieres que una figura sea dibujada encima de todas las otras figuras, necesita estar después de las otras en el código.</p>

<h2>Ejemplo 3-10: controla el orden tu código</h2>

{% codesplit ch03/03_10.js %}
{% p5 ch03/03_10.js class:'whatever' %}

<h2>Ejemplo 3-11: ponlo en reversa</h2>

<p>Modifica el bosquejo invirtiendo el orden de rect() y ellipse() para ver el círculo encima del rectángulo:</p>

{% codesplit ch03/03_11.js %}
{% p5 ch03/03_11.js class:'whatever' %}

<p>Puedes pensar esto como pintar con brocha o hacer un collage. El último elemento que añades es el que está visible encima.</p>

<h2>Propiedades de las figuras</h2>

<p>Puedes querer tener más control de las figuras que dibujas, más allá de su posición y su tamaño. Para lograr esto, existe un conjunto de funcioens que definen las propiedades de las figuras.</p>

<h2>Ejemplo 3-12: define el grosor del trazado</h2>

<p>El valor por defecto del grosor del trazado es de un pixel, pero esto puede ser cambiado con la función strokeWeight(). Un solo parámetro en la función strokeWeight() define el ancho de las líneas dibujadas:</p>

{% codesplit ch03/03_12.js %}
{% p5 ch03/03_12.js class:'whatever' %}

<h2>Ejemplo 3-13: define los atributos del trazado</h2>

<p>La función strokeJoin() cambia la forma en que las líneas se unen (y cómo se ven las esquinas), y la función strokeCap() cambia cómo las líneas son dibujadas en su inicio y su final:</p>

{% codesplit ch03/03_13.js %}
{% p5 ch03/03_13.js class:'whatever' %}

<p>La posición de las figuras como rect() y ellipse() son controladas por las funciones rectMode() y ellipseMode(). Revisa la referencia de p5.js para ver ejemplos de cómo posicionar rectángulos según su centro (en vez de su esquina superior izquierda), o de cómo dibujar elipses desde su esquina superior izquierda como los rectángulos.</p>

<p>Cuando cualquiera de estos atributos es definido, todas las figuras dibujadas posteriormente son afectadas. Como se ve en el ejemplo 3-12, pon atención en cómo el segundo y tercer círculo tienen el mismo grosor de trazado, incluso cuando el grosor es definido solo una vez antes de que ambos sean dibujados.</p>

<p>Fíjate que la línea de código strokeWeight(12 aparece en el bloque de setup() en vez de en draw(). Esto es porque no cambia durante la duración de nuestro programa, así que podemos definirlo sólo una vez durante setup(). Esto es mayoritariamente por organización; poner la línea en draw() tendría el mismo efecto visualizar.</p>

<h2>Color</h2>

<p>Todas las figuras hasta el momento han sido rellenas de color blanco con borde negro. Para cambiar esto, usa las funciones fill() y stroke(). Los valores de los parámetros varían entre 0 y 255, donde 255 es blanco, 128 es gris medio y 0 es negro. En la figura 3-3 se muestra cómo los valores entre 0 y 255 corresponden a diferentes niveles de gris. La función background() que hemos visto en ejemplos anteriores funciona de la misma manera, excepto que en vez de definir el color de relleno o de trazado para dibujar, define el color del fondo del lienzo.</p>

<h2>Ejemplo 3-14: pinta con grises</h2>

<p>Este ejemplo muestra tres diferentes valores de gris en un fondo negro:</p>

{% codesplit ch03/03_14.js %}
{% p5 ch03/03_14.js class:'whatever' %}

<h2>Ejemplo 3-15: controla el relleno y el color del trazado</h2>

<p>Puedes usar la función noStroke() para deshabilitar el trazado para que no se dibuje el borde, y puedes deshabilitar el relleno de una figura con noFill():</p>

{% codesplit ch03/03_15.js %}
{% p5 ch03/03_15.js class:'whatever' %}

<p>Ten cuidado de no deshabilitar el relleno y el trazado al mismo tiempo, como lo hicimos en el ejemplo anterior, porque nada será dibujada en la pantalla.</p>

<h2>Ejemplo 3-16: dibuja con color</h2>

<p>Para ir más allá de la escala de grises, usa tres parámetros para espeficar los componentes de color rojo, verde y azul. Como está libro está impreso en blanco y negro, sólo verás valores grises aquí. Corre el código para revelar los colores:</p>

{% codesplit ch03/03_16.js %}
{% p5 ch03/03_16.js class:'whatever' %}

<p>Los colores en el ejemplo son referidos como color RGB, porque es cómo los computadores definen el color en la pantalla. Los tres números definen los valores de rojo, verde y azul, y varían entre 0 y 255 de la misma forma que los valores de gris. Estos tres números son los parámetros para tus funciones de background(), fill() y stroke().</p>

<h2>Ejemplo 3-17: define la transparencia</h2>

<p>Al añadir un cuarto parámetro a fill() o a stroke(), puedes controlar la transparencia. Este cuarto parámetro es conocido como el valor alpha, y también varía entre 0 y 255 para definir el monto de transparencia. El valor 0 define el color como totalmente transparente (no será mostrado en la pantalla), el valor 255 es enteramente ópaco, y los valores entre estos extremos hacen que los colores se mezclen en la pantalla:</p>

{% codesplit ch03/03_17.js %}
{% p5 ch03/03_17.js class:'whatever' %}

<h2>Formas personalizadas</h2>

<p>No estás limitado a usar estas formas geométricas básicas - puedes dibujar nuevas formas conectando una serie de puntos.</p>

<h2>Ejemplo 3-18: dibuja una flecha</h2>

<p>La función beginShape() señala el comienzo de una nueva figura. La función vertex() es usada para definir cada par de coordenadas (x,y) de la figura. Finalmente, endShape() señala que la figura está completa:</p>

{% codesplit ch03/03_18.js %}
{% p5 ch03/03_18.js class:'whatever' %}

<h2>Ejemplo 3-19: cierra la brecha</h2>

<p>Cuando corres el ejemplo 3-18, verás que el primer y el último punto no están conectados. Para hacer esto, añade la palabra CLOSE como parámetro a la función endShape, así:</p>

{% codesplit ch03/03_19.js %}
{% p5 ch03/03_19.js class:'whatever' %}

<h2>Ejemplo 3-20: crea algunas criaturas</h2>

<p>El poder de definir figuras con vertex() es la habilidad de hacer figuras con bordes complejos. p5.js puede dibujar miles y miles de líneas al mismo tiempo para llenar la pantalla con figuras fantásticas que emanan de tu imaginación. Un ejemplo modesto pero más complejo es presentado a continuación:</p>

{% codesplit ch03/03_20.js %}
{% p5 ch03/03_20.js class:'whatever' %}

<h2>Comentarios</h2>

<p>Los ejemplos en este capítulo usan doble barra (//) al final de una línea para añadir comentarios al código. Los comentarios son una parte de los programas que son ignorados cuando el programa corre. Son útiles para hacer notas para ti mismo que expliquen lo que está pasando en el código. Si otras personas están leyendo tu código, los comentarios son especialmente importantes para ayudarles a entender tu proceso.</p>

<p>Los comentarios son también especialmente útiles para un número de diferentes opciones, como tratar de escoger el color correcto. Así que, por ejemplo, podríamos estar tratando de encontrar el rojo preciso que queremos para una elipse:</p>

{% codesplit ch03/comments_01.js %}
{% p5 ch03/comments_01.js class:'whatever' %}

<p>Ahora supón que quieres probar un rojo distinto, pero no quieres perder el antiguo. Puedo copiar y pegar la línea, hacer un cambio y luego comentar la línea de código antigua:</p>

{% codesplit ch03/comments_02.js %}
{% p5 ch03/comments_02.js class:'whatever' %}


<p>Poner // al principio de una línea temporalmente la anula. O puedo remover // y escribirlo al inicio de otra línea si quiero probarlo de nuevo:</p>

{% codesplit ch03/comments_03.js %}
{% p5 ch03/comments_03.js class:'whatever' %}

<p>Mientras trabajas con bosquejos de p5.js, te encontrarás a ti mismo creando docenas de iteraciones de ideas; usar comentarios para hacer notas o para deshabilitar líneas de códigos puede ayudarte a mantener registro de tus múltiples opciones.</p>

<h2>Robot 1: dibuja</h2>

<p>Ella es P5, la robot de p5.js. Hay 10 diferentes programas para dibujarla y animarla en este libro - cada uno explora una idea de programación diferente. El diseño de P5 está inspirado en Sputnik I (1957), Shakey del Stanford Research Institute (1966 - 1972), el dron luchador en la película Dune (1984) de David Lynch y HAL 9000 de 2001: Una odisea en el espacio (1968), entre otros robots favoritos.</p>

<p>El primer programa de robot usa las funciones de dibujo introducidas anteriormente en este capítulo. Los parámetros de las funciones fill() y stroke() definen los valores de la escala de grises. Las funciones line(), ellipse() y rect() definen las formas que crean el cuello, las antenas, el cuerpo y la cabeza de la robot. Para familiarizarze mejor con las funciones, corre el programa y cambia los valores para rediseñar el robot:</p>

{% codesplit ch03/robot_01.js %}
{% p5 ch03/robot_01.js class:'whatever' %}
